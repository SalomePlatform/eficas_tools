from Numeric import cos
DEBUT()
RAYCRA=1.
EPCRA=0.1
S_CR=3.1415*(RAYCRA**2-(RAYCRA-EPCRA)**2)
T_CR=3.1415
NOMF="nomfichier"
n=2

MA=LIRE_MAILLAGE(  )

MO=AFFE_MODELE(  MAILLAGE=MA,
          #test de validateur GEOM (typ=grma) avec grma derive de GEOM
                 AFFE=(_F(GROUP_MA = ('LI1'),
                          PHENOMENE = 'MECANIQUE',
                          MODELISATION = 'DIS_TR'),
                                ),
                  INFO=2,);

carel=[0.]*78

CAREG=AFFE_CARA_ELEM(MODELE=MO,
                     DISCRET=_F(GROUP_MA=('LI1'),
                                CARA = 'K_TR_L',
                                VALE = carel,
                                REPERE='LOCAL' , ),
                                ORIENTATION=(_F(GROUP_MA=('LI1',),
                                CARA='VECT_Y',
                                VALE=(0.,0.,1.),),),
               AFFE_FIBRE =( _F(GROUP_MA='CRAYON', COOR_AXE_POUTRE = (0.,0.,), CARA='SURFACE', VALE=( 0.,S_CR/4,)),
                             _F(GROUP_MA='CRAYON', COOR_AXE_POUTRE = (0.,0.,), CARA='SURFACE', VALE=( 0.,T_CR,)),
                             _F(GROUP_MA='CRAYON', COOR_AXE_POUTRE = (0.,sin(n*22.5*pi/180),), CARA='SURFACE', VALE=( 0.,T_CR/4,)),
                             _F(GROUP_MA='CRAYON', COOR_AXE_POUTRE = (0.,(cos(n*22.5*pi/180)),), CARA='SURFACE', VALE=( 0.,T_CR/4,)),
                           ),
                        );

DEFI_FICHIER(UNITE=50, FICHIER='./REPE_OUT/zzzz206a_resu.mail')
#test de validateur LongStr avec parametre instance de PARAMETRE
DEFI_FICHIER(UNITE=50, FICHIER=NOMF)
#test de validateur LongStr avec parametre instance de Formula
u=DEFI_FICHIER( FICHIER=NOMF*2)
DEFI_FICHIER (ACTION='LIBERER',UNITE=50)
#test de validateur d'objet entier (typ='I'), instance de la classe entier
DEFI_FICHIER (ACTION='LIBERER',UNITE=u)

# test de validateur qui accepte tout (typ=assd)
IMPR_CO(CONCEPT=_F(NOM=MA))

FIN()
